### 아이템 17 변경 가능성을 최소화하라

#### 불변 클래스
- 불변 클래스란?
  - 인스턴스의 내부 값을 수정할 수 없는 클래스이다.(닉값)
- 자바 플랫폼 라이브러리에도 다양한 불변클래스가 있는데 String, BigInteger, BicDecimal 이 여기 속한다.
- 불변 클래스는 가변 클래스보다 설계하고 구현하고 사용하기 쉬우며, 오류가 생길 여지도 없다.

#### 불변 클래스를 만드는 방법
- 클래스를 불변으로 만들려면 다섯가지 규칙을 따르면 된다.
  - 객체의 상태를 변경하는 메서드를 제공하지 않는다
  - 클래스를 확장할 수 없도록 한다. -> 하위 클래스에서 부주의하게 혹은 나쁜 의도로 객체의 상태를 변하게 만드는 사태를 막아준다.
  - 모든 필드를 final로 만든다 -> 시스템을 강제하는 수단을 이용해 설계자의 의도를 명확히 드러내는 방법.
  - 모든 필드를 private으로 선언한다 -> 필드가 참조하는 가변 객체를 클라이언트에서 직접 접근해 수정하는 일을 막아준다. 
    - 기술적으로는 기본 타입 필드나, 불변 객체를 참조하는 필드를 public final로만 선언해도 불변 객체가 되지만, 이렇게 하면 다음 릴리스에서 내부 표현을 바꾸지 못하므로 권하진 않음
  - 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.

#### 불변객체의 특징
- 불변객체는 단순하다. 
- 불변 객체는 생성된 시점의 상태를 파괴될 때까지 그대로 간직한다. 
- 모든 생성자가 클래스 불변식을 보장한다면 그 클래스를 사용하는 프로그래머가 다른 노력을 들이지 않더라도 영원히 불변으로 남는다. 
- 불변객체는 근본적으로 스레드 안전하여 따로 동기화할 필요 없다. 
- 불변 객체는 안심하고 공유할 수 있다.
- 불변 개체를 자유롭게 공유할 수 있다는 점은 방어적 복사도 필요 없다는 결론으로 이어진다.
- 불변 객체는 자유롭게 공유할 수 있음은 물론 불변 객체끼리 내부 데이터를 공유할 수 있다.

#### 불변 객체를 사용하였을때 이점
- 객체를 만들 때 다른 불변 객체들을 구성요소로 사용하면 이점이 많다.
  - 값이 바뀌지 않는 구성요소들로 이뤄진 객체라면 그 구조가 아무리 복잡하더라도 불변식을 유지하기 훨씬 수월하기 때문
- 불변 객체는 그 자체로 실패 원자성을 제공한다.
- 불변 클래스에도 단점은 있는데 값이 다르면 반드시 독립된 객체로 만들어야 한다는 것.
- 클래스는 꼭 필요한 경우가 아니라면 불변이어야 한다.
- 불변으로 만들 수 없는 클래스라도 변경할 수 있는 부분은 최소한으로 하자.
- 다른 합당한 이유가 없다면 모든 필드는 private final이어야 한다.
- 생성자는 불변식 설정이 모두 완료된 초기화가 완벽히 끝난 상태의 객체를 생성해야 한다.
